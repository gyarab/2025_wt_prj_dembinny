{% extends "base.html" %}
{% block title %}Notification Log{% endblock %}

{% block content %}
<h2>Notification Log</h2>
<table class="table">
  <thead>
    <tr>
      <th>Type</th>
      <th>Recipient</th>
      <th>Subject</th>
      <th>Payment Request</th>
      <th>Sent At</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for log in logs %}
    <tr class="{% if not log.success %}table-danger{% endif %}">
      <td>{{ log.get_notification_type_display }}</td>
      <td>{{ log.recipient }}</td>
      <td>{{ log.subject }}</td>
      <td>{{ log.payment_request|default:"—" }}</td>
      <td>{{ log.sent_at|date:"Y-m-d H:i" }}</td>
      <td>{% if log.success %}✅ Sent{% else %}❌ Failed{% endif %}</td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center">No notifications sent yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
